"use strict";(self["webpackChunklite"]=self["webpackChunklite"]||[]).push([[3502],{1663:function(t,e,i){i.r(e),i.d(e,{default:function(){return w}});var s=i(2520),a=i(5420),n=i(1032),l=i(6513),o=i(4746),r=function(){var t=this,e=t._self._c;return e("lay-header",{attrs:{showBack:!0,tBarColor:"#FFFFFF",txtTitle:t.$t("mypage.center.contact.title"),isGetingItems:t.isGetingItems}},[e(n.A,{staticClass:"pt-4 px-5 pb-6 lay-body",attrs:{column:""}},[e("span",{staticClass:"txt-desc",domProps:{innerHTML:t._s(t.$t("mypage.center.contact.desc"))}}),e("span",{staticClass:"txt-sub mt-5"},[t._v(t._s(t.$t("mypage.center.contact.label-title")))]),e("c-input",{attrs:{hint:t.inputList.title.hint,value:t.inputList.title.value},on:{"update:value":function(e){return t.$set(t.inputList.title,"value",e)}}}),e("span",{staticClass:"txt-sub mt-10"},[t._v(t._s(t.$t("mypage.center.contact.label-cont")))]),e(l.A,{staticClass:"mt-4 flex-grow-0",attrs:{rows:"7","row-height":"24","hide-details":"",outlined:"","no-resize":"",placeholder:t.inputList.cont.hint,maxlength:"5000",color:"rgba(21, 212, 224, 0.3)"},model:{value:t.inputList.cont.value,callback:function(e){t.$set(t.inputList.cont,"value",e)},expression:"inputList.cont.value"}}),e("span",{staticClass:"align-self-end mt-2 txt-cnt"},[e("span",[t._v(t._s(t.inputList.cont.value?t.inputList.cont.value.length:0))]),t._v("/5000")]),e(n.A,{staticClass:"flex-grow-0"},[e("img",{directives:[{def:o.A,name:"ripple",rawName:"v-ripple"}],staticClass:"ic-attach",attrs:{src:i(7470)},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.onClickActionFile.apply(null,arguments)}}}),e(n.A,{staticClass:"lay-attach ml-2 mr-n2",attrs:{row:"",wrap:""}},t._l(t.uploadFiles,(function(s,n){return e(a.A,{key:n,staticClass:"img-attach mr-2 mb-2",attrs:{src:s.thumb,"aspect-ratio":"1","max-width":t.pxToRem(64)},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),(()=>t.onClickActionRemove(s)).apply(null,arguments)}}},[e("img",{staticClass:"ic-x",attrs:{src:i(3303)}}),2==s.type?e("span",{staticClass:"txt-duration"},[t._v(t._s(t.getDurationFormat(s.duration)))]):t._e()])})),1)],1),e(s.A,{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"uploader",attrs:{multiple:!0},on:{change:t.inputFileChange},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}}),e("span",{staticClass:"txt-file-sub mt-3 mb-2"},[t._v(" "+t._s(t.$t("mypage.center.contact.file-sub1"))+" "),e("br"),t._v(" "+t._s(t.$t("mypage.center.contact.file-sub2"))+" ")]),e("span",{staticClass:"txt-sub mt-6"},[t._v(t._s(t.$t("mypage.center.contact.label-tel")))]),e("c-input",{attrs:{hint:t.inputList.name.hint,value:t.inputList.name.value},on:{"update:value":function(e){return t.$set(t.inputList.name,"value",e)}}}),e(n.A,{staticClass:"flex-grow-0 mt-2"},[e("c-input",{staticClass:"input-loc",attrs:{hint:t.inputList.loc.hint,value:t.inputList.loc.value,type:"tel"},on:{"update:value":function(e){return t.$set(t.inputList.loc,"value",e)}}}),e("c-input",{staticClass:"input-tel",attrs:{hint:t.inputList.tel.hint,value:t.inputList.tel.value,type:"tel"},on:{"update:value":function(e){return t.$set(t.inputList.tel,"value",e)}}})],1)],1),e("c-footer",{staticClass:"lay-footer px-5 py-4",attrs:{height:"86",elevation:"0"}},[e("c-btn",{attrs:{thema:"default-bg",onClick:t.onClickActionSubmit}},[t._v(" "+t._s(t.$t("common.submit"))+" ")])],1)],1)},u=[],c=(i(4114),i(4603),i(7566),i(8721),i(3004)),h=i(3171),p=i(2171),m=i(6180),d=i(1824);const v={submit:t=>new Promise(((e,i)=>{for(var s=new FormData,a=0;a<t.files.length;a++)s.append("files",t.files[a].file);var n=JSON.stringify(t.data),l=new Blob([n],{type:"application/json"});s.append("requestJson",l);var o=new XMLHttpRequest;o.open(t.method,h.H$+t.url);let r=(0,p.gf)();r&&o.setRequestHeader("token",r),o.onload=function(){var t=JSON.parse(o.responseText);"200"===t.code?e(t.info):"20011"===t.code?(setTimeout((()=>{d.A.dispatch("FedLogout").then((()=>{location.reload()}))}),1e3),i("로그인이 필요합니다.")):(m.A.emit("SHOW_TOAST",t.msg),i(t))},o.onerror=()=>{i({msg:"Network Error"})},o.send(s)}))};var g={components:{CFooter:c.A},data(){return{isGetingItems:!1,imgFiles:[],videoFiles:[],files:[],uploadFiles:[],emailCheck:!1,inputList:{title:{value:null,hint:this.$t("mypage.center.contact.hint-title"),validation:()=>!!this.inputList.title.value||(this.showToast(this.inputList.title.hint,!1,!1),!1)},cont:{value:null,hint:"",validation:()=>!!this.inputList.cont.value||(this.showToast(this.$t("mypage.center.contact.hint-cont"),!1,!1),!1)},name:{value:null,hint:this.$t("mypage.center.contact.hint-name"),validation:()=>!!this.inputList.name.value||(this.showToast(this.$t("mypage.center.contact.label-tel"),!1,!1),!1)},loc:{value:null,hint:"+82"},tel:{value:null,hint:this.$t("mypage.center.contact.hint-tel"),validation:()=>!!this.inputList.tel.value||(this.showToast(this.$t("mypage.center.contact.label-tel"),!1,!1),!1)}}}},computed:{},watch:{},created(){},mounted(){},destroyed(){},methods:{onClickActionFile(){this.$refs.uploader.$refs.input.click()},getFileUrl(t){return window.URL.createObjectURL(t)},async inputFileChange(t){for await(const s of t){var e=!1;if(!this.uploadFiles.some((t=>t.oriFileName==s.name))){var i=s.type.toLowerCase().startsWith("image")?1:s.type.toLowerCase().startsWith("video")?2:3;if(2==i)await this.getDuration(s).then((t=>{if(t.duration>60)e=!0;else{let e={oriFileName:s.name,fileSize:s.size,type:i,file:s,duration:t.duration,thumb:this.getFileUrl(t.coverImg)};this.videoFiles.push(e)}}));else{let t={oriFileName:s.name,fileSize:s.size,type:i,file:s,thumb:this.getFileUrl(s)};this.imgFiles.push(t)}}}this.imgFiles.length>5&&(e=!0,this.imgFiles.splice(0,this.imgFiles.length-5)),this.videoFiles.length>2&&(e=!0,this.videoFiles.splice(0,this.videoFiles.length-2)),e&&this.showToast(this.$t("mypage.center.contact.file-sub2"),!1,!1),this.uploadFiles.splice(0,this.uploadFiles.length),this.imgFiles.length&&this.uploadFiles.push(...this.imgFiles),this.videoFiles.length&&this.uploadFiles.push(...this.videoFiles)},getDuration(t){return new Promise(((e,i)=>{const s=document.createElement("video");s.setAttribute("crossOrigin","anonymous"),s.setAttribute("src",this.getFileUrl(t)),s.load(),s.addEventListener("loadedmetadata",(()=>{var t=s.duration;setTimeout((()=>{s.currentTime=0}),200),s.addEventListener("seeked",(()=>{const i=document.createElement("canvas");i.width=s.videoWidth,i.height=s.videoHeight;const a=i.getContext("2d");a.drawImage(s,0,0,i.width,i.height),a.canvas.toBlob((i=>{var s={duration:t,coverImg:i};e(s)}),"image/jpeg",.75)}))}))}))},onClickActionSubmit(){for(let t in this.inputList)if(this.inputList[t].validation&&!this.inputList[t].validation())return!1;this.isGetingItems||(this.isGetingItems=!0,v.submit({url:"/qna/",method:"post",data:{title:this.inputList.title.value,content:this.inputList.cont.value,username:this.inputList.name.value,tel:this.inputList.loc.value+" "+this.inputList.tel.value},files:this.uploadFiles}).then((t=>{this.isGetingItems=!1,t&&t.id?(this.showToast(this.$t("error.comp"),!1,!1),this.$router.go(-1)):this.showToast(t.msg,!1,!1)})).catch((t=>{this.isGetingItems=!1,this.showToast(t.msg,!1,!1)})))},onClickActionRemove(t){this.uploadFiles.splice(this.uploadFiles.indexOf(t),1),2==t.type?this.videoFiles.splice(this.videoFiles.indexOf(t),1):this.imgFiles.splice(this.imgFiles.indexOf(t),1)}}},f=g,F=i(1656),b=(0,F.A)(f,r,u,!1,null,"35bbbaec",null),w=b.exports},2812:function(t){var e=TypeError;t.exports=function(t,i){if(t<i)throw new e("Not enough arguments");return t}},4603:function(t,e,i){var s=i(6840),a=i(9504),n=i(655),l=i(2812),o=URLSearchParams,r=o.prototype,u=a(r.append),c=a(r["delete"]),h=a(r.forEach),p=a([].push),m=new o("a=1&a=2&b=3");m["delete"]("a",1),m["delete"]("b",void 0),m+""!=="a=2"&&s(r,"delete",(function(t){var e=arguments.length,i=e<2?void 0:arguments[1];if(e&&void 0===i)return c(this,t);var s=[];h(this,(function(t,e){p(s,{key:e,value:t})})),l(e,1);var a,o=n(t),r=n(i),m=0,d=0,v=!1,g=s.length;while(m<g)a=s[m++],v||a.key===o?(v=!0,c(this,a.key)):d++;while(d<g)a=s[d++],a.key===o&&a.value===r||u(this,a.key,a.value)}),{enumerable:!0,unsafe:!0})},7566:function(t,e,i){var s=i(6840),a=i(9504),n=i(655),l=i(2812),o=URLSearchParams,r=o.prototype,u=a(r.getAll),c=a(r.has),h=new o("a=1");!h.has("a",2)&&h.has("a",void 0)||s(r,"has",(function(t){var e=arguments.length,i=e<2?void 0:arguments[1];if(e&&void 0===i)return c(this,t);var s=u(this,t);l(e,1);var a=n(i),o=0;while(o<s.length)if(s[o++]===a)return!0;return!1}),{enumerable:!0,unsafe:!0})},8721:function(t,e,i){var s=i(3724),a=i(9504),n=i(2106),l=URLSearchParams.prototype,o=a(l.forEach);s&&!("size"in l)&&n(l,"size",{get:function(){var t=0;return o(this,(function(){t++})),t},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=3502.786b96da.js.map